<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <META HTTP-EQUIV="Pragma" CONTENT="no-cache">

  <!-- cache 지우는 meta 태그 -->
  <meta http-equiv="Cache-Control" content="no-cache" /> <!-- 캐시가 되지 않도록 정의 -->
  <meta http-equiv="Pragma" content="no-cache" /> <!-- 캐시가 되지 않도록 정의 -->
  <meta http-equiv="Expires" content="-1"> <!-- 즉시 캐시만료 -->

  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/font.css">
  <link rel="stylesheet" href="css/simplebot.css">

  <script src="js/jquery.js"></script>
  <script src="js/jquery.form.js"></script>

  <title>chatbot builder</title>
</head>
<body>
  <div id="wrap">
    <div id="header">
      <h1>chatbot builder</h1>
    </div>

    <div id="container" class="chatbot_builder test_on">
      <div class="content">
        <div class="multipleBoxType">
          <!-- lot_wrap -->
          <div class="lot_wrap">
            <div class="lotBox chatbot_list">
              <div class="tit">
                <h3>챗봇목록</h3>
                <div class="fr">
                  <button type="button" class="btn_primary">추가</button>
                </div>
              </div>
              <div class="cont">
                <div class="iptBox">
                  <!-- [D] 인풋에서 엔터 키 입력 시 btn_search가 클릭됩니다 -->
                  <input type="text" class="ipt_txt search" autocomplete="off">
                  <button type="button" class="btn_search"><span class="text_hide">검색하기</span></button>
                </div>
                <ul class="common_lst scroll">
                  <li>
                    <div>
                      <span>골든튤립</span>
                      &lpar;<em>gt_hud</em>&rpar;
                    </div>
                    <div>
                      <span>호텔</span>
                    </div>
                    <a href="#chat_list_delete" class="btn_icon delete btn_lyr_open"></a>
                  </li>
                  <li class="active">
                    <div>
                      <span>메이필드</span>
                      &lpar;<em>mayfield</em>&rpar;
                    </div>
                    <div>
                      <span>호텔</span>
                    </div>
                    <a href="#chat_list_delete" class="btn_icon delete btn_lyr_open"></a>
                  </li>
                  <li>
                    <div>
                      <span>파티오세븐</span>
                      &lpar;<em>patio7</em>&rpar;
                    </div>
                    <div>
                      <span>호텔</span>
                    </div>
                    <a href="#chat_list_delete" class="btn_icon delete btn_lyr_open"></a>
                  </li>
                  <li>
                    <div>
                      <span>설리봇</span>
                      &lpar;<em>sully</em>&rpar;
                    </div>
                    <div>
                      <span>회사소개</span>
                    </div>
                    <a href="#chat_list_delete" class="btn_icon delete btn_lyr_open"></a>
                  </li>
                </ul>
              </div>
            </div>
  
            <!-- chatbot_content -->
            <div class="lotBox chatbot_content">
              <div class="tit">
                <h3>title</h3>
                <div class="fr">
                  <!-- [D] 챗봇테스트 버튼 클릭 시 챗봇 테스트 영역이 보여집니다. -->
                  <button type="button" class="btn_primary btn_test_on">챗봇 테스트</button>
                </div>
              </div>
  
              <div class="cont">
                content
              </div>
            </div>
            <!-- //chatbot_content -->
          </div>
          <!-- //lot_wrap -->
          <!-- chatbot_test -->
          <div class="lotBox chatbot_test">
            <div class="tit">
              <h3>챗봇테스트</h3>
              <div class="fr">
                <!-- [D] 닫기 버튼 클릭 시 챗봇 테스트 영역이 사라집니다. -->
                <button type="button" class="btn_primary btn_test_off">닫기</button>
              </div>
            </div>
            <div class="cont">
              <dl class="test_result scroll">
                <dt>INPUT</dt>
                <dd>
                  <p><span class="highlight">input text</span><em>안녕</em></p>
                  <p><span class="highlight">type</span><em>utter</em></p>
                </dd>
                <dt>INTENT</dt>
                <dd>
                  <p><span class="highlight">intent</span><em>처음으로</em></p>
                  <p><span class="highlight">engine</span><em>bert-itc</em></p>
                  <p><span class="highlight">model</span><em>hotel-category 7</em></p>
                  <p><span class="highlight">prob</span><em>87.8%</em></p>
                </dd>
                <dt>TASK</dt>
                <dd>
                  <p><span class="highlight">pre-task</span><em>[NONE]</em></p>
                  <p><span class="highlight">task</span><em>처음으로</em></p>
                </dd>
                <dt>ANSWER</dt>
                <dd>
                  <p><span class="highlight">text</span><em>안녕하세요. 파티오 세븐 & 나인 호텔을 찾아주셔서 감사합니다.</em></p>
                </dd>
              </dl>
              <div>
                챗봇이 들어갈 자리
              </div>
            </div>
          </div>
          <!-- //chatbot_test -->
        </div>
      </div>
      <!-- //content -->
    </div>
    <!-- //container -->
  </div>
  <!-- //wrap -->

<!-- 모달 챗봇 삭제 -->
<div id="chat_list_delete" class="lyrBox">
  <div class="lyr_top">
    <h3>챗봇 삭제</h3>
    <button class="btn_lyr_close"><span class="text_hide">닫기</span></button>
  </div>
  <div class="lyr_mid">
    <p class="infoTxt"><em>선택한 챗봇</em>을(를) 삭제합니다.</p>
  </div>
  <div class="lyr_btm">
    <div class="btnBox sz_small">
      <button type="button" class="btn_primary btn_submit btn_lyr_close">확인</button>
      <button type="button" class="btn_primary btn_submit btn_lyr_close">취소</button>
    </div>
  </div>
</div>
<!-- //모달 챗봇 삭제 -->
<!-- 공통 js -->
<script>
  $(document).ready(function () {
    // AMR Layer popup open
    $('.btn_lyr_open').on('click', function () {
      var winHeight = $(window).height() * 0.7,
        hrefId = $(this).attr('href');

      $('body').css('overflow', 'hidden');
      $('body').find(hrefId).wrap('<div class="lyrWrap"></div>');
      $('body').find(hrefId).before('<div class="lyr_bg"></div>');

      //대화 UI
      $('.lyrBox .lyr_mid').each(function () {
        $(this).css('max-height', Math.floor(winHeight) + 'px');
      });

      //Layer popup close
      $('.btn_lyr_close, .lyr_bg').on('click', function () {
        $('body').css('overflow', '');
        $('body').find(hrefId).unwrap('<div class="lyrWrap"></div>');
        $('.lyr_bg').remove();
      });
    });

    // AMR 돋보기 아이콘이 있는 검색 영역에서 엔터 시 검색버튼 눌림
    $('.ipt_txt.search').on('keyup', function(){
      if (event.keyCode == 13) {
        $(this).next('.btn_search').trigger('click');
      }
    });

    // AMR 테이블 페이지네이션 페이지 active
    // .page 클릭 시
    $('.tbl_wrap .pagination .page').on('click', function(){
      var pages = $('.pagination .pages .page');
      var thisPage = $(this);
      pages.removeClass('active');
      thisPage.addClass('active');
    });
    // 버튼 클릭 시
    $('.tbl_wrap .pagination > button').on('click', function(){
      var thisButton = $(this);
      var pages = $('.pagination .pages .page');
      var activePage = $('.pagination .pages .page.active');
      var thisPage = pages.index(activePage);
      var firstPage = 0;
      var lastPage = pages.length - 1;
      var prevPage = thisPage - 1;
      var nextPage = thisPage + 1;

      pages.removeClass('active');

      if (thisButton.hasClass('first')) {
        pages.eq(firstPage).addClass('active');
        return;
      }

      if (thisButton.hasClass('prev')) {
        if (thisPage === 0 ) {
          prevPage = 0;
        }
        pages.eq(prevPage).addClass('active');
        return;
      }

      if (thisButton.hasClass('next')) {
        if (thisPage === lastPage ) {
          nextPage = lastPage;
        }
        pages.eq(nextPage).addClass('active');
        return;
      }

      if (thisButton.hasClass('last')) {
        pages.eq(lastPage).addClass('active');
        return
      }
    });
    
    // AMR 챗봇빌더 목록 active
    $('.chatbot_builder .chatbot_list li').on('click', function(){
      var list = $('.chatbot_builder .chatbot_list li');
      var thisList = $(this);
      list.removeClass('active');
      thisList.addClass('active');
    });

    // AMR 챗봇빌더 메뉴 active
    $('.chatbot_builder .menu li').on('click', function(){
      var menu = $('.chatbot_builder .menu li');
      var thisMenu = $(this);
      menu.removeClass('active');
      thisMenu.addClass('active');
    });

    // 챗봇빌더 답변 테이블 내 상세, 삭제 버튼 클릭 시 해당 col active
    $('.chatbot_builder table .btn_line_primary, .chatbot_builder table .btn_line_warning').on('click', function(){
      var table = $(this).parents('table');
      var tableCol = table.find('tr');
      var thisCol = $(this).parents('tr');
      tableCol.removeClass('active');
      thisCol.addClass('active');
    });
    
    // AMR 챗봇빌더 챗봇 테스트 열기닫기
    function handleChatbotTestOnOff() {
      var btnOn = $('.chatbot_builder .btn_test_on');
      var btnOff = $('.chatbot_builder .btn_test_off');

      btnOn.on('click', function(){
        $('.chatbot_builder').addClass('test_on');
        btnOn.addClass('hide');
      });

      btnOff.on('click', function(){
        $('.chatbot_builder').removeClass('test_on');
        btnOn.removeClass('hide');
      });
    }
    handleChatbotTestOnOff();
  });
</script>
</body>
</html>