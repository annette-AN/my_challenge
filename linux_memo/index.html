<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="resources/css/reset.css">
  <link rel="stylesheet" href="resources/css/index.css">
  <title>Linux memo</title>
</head>
<body>
  <div id="wrapper">
    <div id="top_area">
      <div class="search_box">
        <input type="text" class="search_input">
        <ul class="result_list">
          <li>sns</li>
          <li>snacks</li>
          <li>sneak</li>
        </ul>
      </div>
      <button type="button" class="sync"><span class="text_ir">sync</span></button>
      <div class="each_setting">
        <!-- each_setting click 시 버블링 막기 -->
        <button type="button"><span class="text_ir">설정</span></button>
        <ul>
          <li>설정 리스트</li>
        </ul>
      </div>
    </div>
    <!-- //header -->

    <div id="content">
      <ul class="bookmarks">
        <!-- <li class="active">
          <input type="text" value="board_1">
          <span class="show">board_1</span>
        </li>
        <li>
          <input type="text" value="board2">
          <span class="show">board2</span>
        </li> -->
        <li id="add_bookmark">
          <!-- click : enabled -->
          <input type="text" id="bookmark_add_input">
          <span id="bookmark_add_span" class="show">+</span>
        </li>
      </ul>
      <!-- //bookmark_list -->

      <div class="board">
        <!-- class="memobox_opened" : 메모쓰기박스가 모든 영역을 차지함 -->
        <div class="category_box">
          <div class="category">
            <div class="category_name">
              <input type="text" value="category_1" class="">
            </div>
  
            <ul class="cards">
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              
              <li class="add_card">
                <button type="button" class="memo_create">+</button>
              </li>
            </ul>
          </div>

          <div class="category">
            <div class="category_name">
              <input type="text" value="category_1" class="">
            </div>
  
            <ul class="cards">
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다<br>
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li class="add_card">
                <button type="button" class="memo_create">+</button>
              </li>
            </ul>
          </div>
  
          <div class="category add_category">
            <div class="category_name">
              <input type="text" placeholder="+" class="">
            </div>
          </div>
        </div>
        <!-- //category_box -->

        <div class="memo_box">
          <div class="memo_swich swich_cover">
            <button type="button" title="메모 펼치기" id="swich_memoopen"></button>
            <button type="button" title="메모 접기" id="swich_memofold"></button>
          </div>
          <!-- //memo_openfold -->

          <div class="memo_write">
          <!-- .memo_write.titles_show : .titles_box .titles 가 보여짐 -->
            <div class="new_memo">
              <button type="button" class="memo_clear">+ 새 메모</button>
            </div>

            <div class="titles_box">
              <button type="button" class="show_btn" title="show category"><span class="text_ir">dropdown open close</span></button>
              <ol class="titles">
                <li>
                  <div class="title">
                    <span>board name</span>
                  </div>
                  <div class="search_box">
                    <input type="text" class="search_input">
                    <ul class="result_list">
                      <!-- .result_box.result_show : 결과값 리스트가 보임 -->
                      <li>board 1</li>
                      <li>board 2</li>
                      <li>board 3</li>
                  </div>
                </li>
                <li>
                  <div class="title">
                    <span>category name</span>
                  </div>
                  <div class="search_box">
                    <input type="text" class="search_input">
                    <ul class="result_list">
                      <!-- 검색값이 없을 경우 create name 보여지고 선택가능 -->
                      <li class="create">create name</li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>

            <div class="card_box">
              <input type="text" class="card_title" placeholder="title">
              <textarea name="" id="" rows="10" class="card_content" placeholder="content"></textarea>
            </div>
          </div>
          <!-- //memo_write -->
        </div>
        <!-- //memo_box -->
      </div>
      <!-- //board -->
    </div>
    <!-- //content -->
  </div>
  <!-- //wrapper -->

<script src="resources/js/jQuery3.4.1.js"></script>
<script>
$(document).ready(function(){
  // search_input에 text가 입력되면 list up과 동시에 .result_list.result_show

  // bookmark add(+) 클릭 시 input 창 활성화
  $('#add_bookmark').on('click', function(){
    $('#bookmark_add_span').removeClass('show');
    $('#bookmark_add_input').addClass('show').focus();
  });

  // bookmark input focusout 시 bookmark 리스트 생성
  $('#bookmark_add_input').focusout(function(){
    // value가 없으면 리스트 미생성
    if ( !$(this).val() ) {
      $('#bookmark_add_span').addClass('show')
      $(this).removeClass('show').val('')
      return;
    }

    $('#bookmark_add_span').addClass('show')
    createBookmarkList();
    $(this).removeClass('show').val('')

  }).on('keydown',function(e){
    var keyCode = e.which?e.which:e.keyCode;

    // enter 키 입력 시 리스트 생성 (value 값이 있을 때만)
    if ( keyCode === 13 ) {
      if ( $(this).val() === '' ) {
        $(this).val('').focusout();
        return;
      } 
      $(this).focusout();
    }

    // esc 키 입력 시 리스트 미생성
    if ( keyCode === 27 ) {
      $(this).val('').focusout();
    }
  });

  // bookmark 리스트 생성 및 이벤트 func
  function createBookmarkList() {
    // bookmark 리스트 생성
    $('#add_bookmark').before(
      '<li class="bookmark">\n' +
        '<input type="text" value="' + $('#bookmark_add_input').val() + '" class="bookmark_input"\n>' +
        '<span class="bookmark_span show">' + $('#bookmark_add_input').val()+ '</span\n>' +
      '</li>'
    );

    // bookmark 리스트 이벤트 (active 및 modify)
    $('.bookmark').on('click', function(){// 클릭 시 bookmark 활성화
      $('.bookmark').removeClass('active');
      $(this).addClass('active');

    }).on('dblclick', function(){// 더블클릭 시 bookmark input창이 활성화 되며 수정(modify)모드
      var childInputEl = $(this).children('.bookmark_input');
      var nowValue = $(this).children('.bookmark_input').val();

      $(this).children('.bookmark_span').removeClass('show');
      childInputEl.addClass('show');
      childInputEl.focus().val('').val(nowValue);
    });

    $('.bookmark_input').focusout(function(){// focusout 시 수정완료
      $(this).removeClass('show')
      $(this).siblings('.bookmark_span').text($(this).val()).addClass('show')

    }).on('keydown',function(e){
      var keyCode = e.which?e.which:e.keyCode;

      // enter 키 입력 시 수정완료 (value 값이 있을 때만)
      if ( keyCode === 13 ) {
        if ( $(this).val() === '' ) {
          $(this).val($(this).siblings('.bookmark_span').text()).focusout();
          return;
        }
        $(this).focusout();
      }

      // esc 키 입력 시 취소
      if ( keyCode === 27 ) {
        $(this).val($(this).siblings('.bookmark_span').text()).focusout();
      }
    });
  }

  setTimeout(function(){
    $('#add_bookmark').trigger('click');
    $('#bookmark_add_input').val('board-1').focusout();
  }, 0);

  // memobox open close
  $('#swich_memoopen').on('click', function(){
    $('.board').addClass('memobox_opened');
    $(this).parent().removeClass('swich_cover')
  });

  $('#swich_memofold').on('click', function(){
    $('.board').removeClass('memobox_opened');
    $(this).parent().addClass('swich_cover')
  });

  // memo category select box open close
  $('.titles_box .show_btn').on('click', function(){
    $('.memo_write').toggleClass('titles_show')
  });
});
</script>
</body>
</html>