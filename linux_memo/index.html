<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="resources/css/reset.css">
  <link rel="stylesheet" href="resources/css/index.css">
  <title>Linux memo</title>
</head>
<body>
  <div id="wrapper">
    <div id="top_area">
      <div class="search_box">
        <input type="text" class="search_input">
        <ul class="result_list">
          <li>sns</li>
          <li>snacks</li>
          <li>sneak</li>
        </ul>
      </div>
      <button type="button" class="sync"><span class="text_ir">sync</span></button>
      <div class="each_setting">
        <!-- each_setting click 시 버블링 막기 -->
        <button type="button"><span class="text_ir">설정</span></button>
        <ul>
          <li>설정 리스트</li>
        </ul>
      </div>
    </div>
    <!-- //header -->

    <div id="content">
      <ul class="bookmarks">
        <!-- <li class="active">
          <input type="text" value="board_1">
          <span class="show">board_1</span>
        </li>
        <li>
          <input type="text" value="board2">
          <span class="show">board2</span>
        </li> -->
        <li class="add_bookmark">
          <!-- click : enabled -->
          <input type="text">
          <span class="show">+</span>
        </li>
      </ul>
      <!-- //bookmark_list -->

      <div class="board">
        <!-- class="memobox_opened" : 메모쓰기박스가 모든 영역을 차지함 -->
        <div class="category_box">
          <div class="category">
            <div class="category_name">
              <input type="text" value="category_1" class="bookmark">
            </div>
  
            <ul class="cards">
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              
              <li class="add_card">
                <button type="button" class="memo_create">+</button>
              </li>
            </ul>
          </div>

          <div class="category">
            <div class="category_name">
              <input type="text" value="category_1" class="bookmark">
            </div>
  
            <ul class="cards">
              <li>
                <div class="card_preview">
                  txt와 img가 들어간다<br>
                  두 줄 까지만 보인다?
                </div>
                <div class="each_setting">
                  <button type="button"><span class="text_ir">설정</span></button>
                  <ul>
                    <li>설정 리스트</li>
                  </ul>
                </div>
              </li>
              <li class="add_card">
                <button type="button" class="memo_create">+</button>
              </li>
            </ul>
          </div>
  
          <div class="category add_category">
            <div class="category_name">
              <input type="text" placeholder="+" class="bookmark">
            </div>
          </div>
        </div>
        <!-- //category_box -->

        <div class="memo_box">
          <div class="memo_swich swich_cover">
            <button type="button" title="메모 펼치기" id="swich_memoopen"></button>
            <button type="button" title="메모 접기" id="swich_memofold"></button>
          </div>
          <!-- //memo_openfold -->

          <div class="memo_write">
          <!-- .memo_write.titles_show : .titles_box .titles 가 보여짐 -->
            <div class="new_memo">
              <button type="button" class="memo_clear">+ 새 메모</button>
            </div>

            <div class="titles_box">
              <button type="button" class="show_btn" title="show category"><span class="text_ir">dropdown open close</span></button>
              <ol class="titles">
                <li>
                  <div class="title">
                    <span>board name</span>
                  </div>
                  <div class="search_box">
                    <input type="text" class="search_input">
                    <ul class="result_list">
                      <!-- .result_box.result_show : 결과값 리스트가 보임 -->
                      <li>board 1</li>
                      <li>board 2</li>
                      <li>board 3</li>
                  </div>
                </li>
                <li>
                  <div class="title">
                    <span>category name</span>
                  </div>
                  <div class="search_box">
                    <input type="text" class="search_input">
                    <ul class="result_list">
                      <!-- 검색값이 없을 경우 create name 보여지고 선택가능 -->
                      <li class="create">create name</li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>

            <div class="card_box">
              <input type="text" class="card_title" placeholder="title">
              <textarea name="" id="" rows="10" class="card_content" placeholder="content"></textarea>
            </div>
          </div>
          <!-- //memo_write -->
        </div>
        <!-- //memo_box -->
      </div>
      <!-- //board -->
    </div>
    <!-- //content -->
  </div>
  <!-- //wrapper -->

<script src="resources/js/jQuery3.4.1.js"></script>
<script>
$(document).ready(function(){
  // search_input에 text가 입력되면 list up과 동시에 .result_list.result_show
  $('.bookmarks li.add_bookmark').on('click', function(){// start add bookmark
    var thisInput = $(this).children('input[type=text]');

    $(this).children('span').removeClass('show');
    thisInput.addClass('show').focus();

    thisInput.focusout(function(){// end add bookmark
      if ( !$(this).val() ) {
        $(this).siblings('span').addClass('show')
        $(this).removeClass('show').val('')
        return;
      }

      $(this).siblings('span').addClass('show')
      createBookmarkList();// add bookmark
      $(this).removeClass('show').val('')

    }).on('keydown',function(e){// press enter or esc when modify mode
      var keyCode = e.which?e.which:e.keyCode;

      // MQ 콘솔이 여러번 찍힘
      if ( keyCode === 13 ) {
        console.log('add enter')
        $(this).focusout();
        return;
      }

      if ( keyCode === 27 ) {
        console.log('add esc')
        $(this).val('').focusout();
      }
    });

    function createBookmarkList() {
      // add bookmark list
      $('.bookmarks li.add_bookmark')
      .before('<li>\n' +
        '<input type="text" value="' + thisInput.val() + '"\n>' +
        '<span class="show">' + thisInput.val() + '</span\n>' +
      '</li>');

      // bookmark list event
      $('.bookmarks li').on('click', function(){//list active
        if ( $(this).hasClass('add_bookmark') ) {
          return;
        }
        $('.bookmarks li').removeClass('active');
        $(this).addClass('active');

      }).on('dblclick', function(){//start modify
        var thisInput = $(this).children('input[type=text]');
        var value = $(this).children('input[type=text]').val();

        $(this).children('span').removeClass('show');
        thisInput.addClass('show');
        thisInput.focus().val('').val(value);

        thisInput.focusout(function(){//focusout
          $(this).removeClass('show')
          $(this).siblings('span').text($(this).val()).addClass('show')

        }).on('keydown',function(e){//press key (enter, esc)
          var keyCode = e.which?e.which:e.keyCode;

          // MQ 콘솔이 여러번 찍힘
          if ( keyCode === 13 ) {// enter
            console.log('modify enter')
            $(this).focusout();
          }

          if ( keyCode === 27 ) {// esc
            console.log('modify esc')
            $(this).val($(this).siblings('span').text()).focusout();
          }
        });
      });
    }
  });

  // memobox open close
  $('#swich_memoopen').on('click', function(){
    $('.board').addClass('memobox_opened');
    $(this).parent().removeClass('swich_cover')
  });

  $('#swich_memofold').on('click', function(){
    $('.board').removeClass('memobox_opened');
    $(this).parent().addClass('swich_cover')
  });

  // memo category select box open close
  $('.titles_box .show_btn').on('click', function(){
    $('.memo_write').toggleClass('titles_show')
  });
});
</script>
</body>
</html>