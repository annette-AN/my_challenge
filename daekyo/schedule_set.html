<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densityDpi=device-dpi">
  <!-- (safari) 전화번호 형태로 된 문자열을 전화로 자동호출하지 못하게 함 -->
  <meta name="format-detection" content="telephone=no">
  <!-- favicon mobile -->
  <link rel="apple-touch-icon" sizes="180x180" href="resources/images/favicon/apple-touch-icon.png">
  <link rel="manifest" href="resources/images/favicon/site.webmanifest">
  <!-- css -->
  <link rel="stylesheet" href="resources/css/font.css">
  <link rel="stylesheet" href="resources/css/reset.css">
  <link rel="stylesheet" type="text/css" href="resources/css/fullCalendar.min.css">
  <link rel="stylesheet" href="resources/css/teacher_ver_m.css">
  <!-- js -->
  <script type="text/javascript" src="resources/js/jquery-1.11.2.min.js"></script>
  <script type="text/javascript" src="resources/js/fullCalendar.js"></script>
  <script type="text/javascript" src="resources/js/moment.min.js"></script>

  <title>Schedule set</title>
</head>

<body>
  <!-- #wrap -->
  <div id="wrap">
    <!-- header -->
    <div id="header">
      <!-- header_bar -->
      <div class="header_bar">
        <div class="fl">
          <!-- [D] .btn_prev 페이지 뒤로가기 버튼에 class="hide"를 붙히면 display: none이 됩니다 -->
          <button type="button" class="btn_prev">
            <img src="resources/images/ico_back.svg" alt="뒤로가기">
          </button>
        </div>
        <h1 class="img_box">
          <img src="resources/images/logo_daekyo.svg" alt="대교 상상 키즈 로고">
        </h1>
        <div class="fr">
          <button type="button" class="gnb_open">
            <img src="resources/images/ico_menu.svg" alt="메뉴 열기">
          </button>
        </div>
      </div>
      <!-- //header_bar -->
      <!-- gnb -->
      <div id="gnb">
        <div class="gnb_box gnb_logo">
          <div class="img_box">
            <img src="resources/images/logo_daekyo_kids.svg" alt="대교 상상 키즈 로고">
          </div>
        </div>
        <div class="gnb_box gnb_card">
          <!-- 추가 AMR 200908 스케줄 비활성 input.scd_disable on일 경우
            gnb 메뉴 비활성 : 방문시간표, 방문관리, 정산내역 -->
          <a href="visit_timetable.html" class="card" disabled>
            <img src="resources/images/ico_clock.svg" alt="방문시간표">
            <span class="primary_text primary_text_s">
              방문시간표
            </span>
          </a>
          <a href="visit_management.html" class="card" disabled>
            <img src="resources/images/ico_schedule.svg" alt="방문관리">
            <span class="primary_text primary_text_s">
              방문관리
            </span>
          </a>
          <a href="schedule_set.html" class="card">
            <img src="resources/images/ico_calendar.svg" alt="스케줄 설정">
            <span class="primary_text primary_text_s">
              스케줄 설정
            </span>
          </a>
          <a href="#none" class="card" disabled>
            <img src="resources/images/ico_folder.svg" alt="정산내역">
            <span class="primary_text primary_text_s">
              정산내역
            </span>
          </a>
          <a href="notice.html" class="card">
            <img src="resources/images/ico_list.svg" alt="공지사항">
            <span class="primary_text primary_text_s">
              공지사항
            </span>
          </a>
          <a href="use_information.html" class="card">
            <img src="resources/images/ico_page.svg" alt="자주묻는 질문">
            <span class="primary_text primary_text_s">
              자주묻는 질문
            </span>
          </a>
        </div>
        <div class="gnb_box gnb_card">
          <a href="profile.html" class="card">
            <img src="resources/images/ico_profile.svg" alt="My 프로필">
            <span class="primary_text primary_text_s">
              My&nbsp;&nbsp;프로필
            </span>
          </a>
          <a href="#none" class="card">
            <img src="resources/images/ico_key.svg" alt="비밀번호 변경">
            <span class="primary_text primary_text_s">
              비밀번호 변경
            </span>
          </a>
          <a href="login.html" class="card">
            <img src="resources/images/ico_logout.svg" alt="로그아웃">
            <span class="primary_text primary_text_s">
              로그아웃
            </span>
          </a>
        </div>
        <div class="gnb_box">
          <a href="resources/video/sample_video.mp4" class="btn_movie">
            <img src="resources/images/ico_play.svg" alt="영상 바로가기">
            <span class="primary_text primary_text_s">우동선생님, 이렇게 활동하세요!</span>
          </a>
        </div>
      </div>
      <!-- //gnb -->
    </div>
    <!-- //header -->

    <!-- #m_container -->
    <div id="m_container">
      <h2 class="page_title">스케줄 설정</h2>

      <!-- .set_area -->
      <div class="schedule_set_area">
        <!-- .set_btn_box -->
        <!-- [D] 선택 시 .set_btn_box li에 addClass 'on' 되며 해당메뉴와 해당화면 활성화됨  -->
        <ul class="set_btn_box">
          <li class="on"><a href="#none">방문 가능시간 설정</a></li>
          <li><a href="#none">방문 불가능일정 설정</a></li>
        </ul>
        <!-- //.set_btn_box -->

        <!-- .set_board -->
        <div class="set_board">
          <!-- .cont_slt_time -->
          <div class="cont_slt_time">
            <div class="btn_option_group">
              <!-- [D] 체크 시 (#scdl_disable) 팝업 등장 / 해제 시 (#scdl_activate) 팝업 등장 
                스케줄을 비활성화 할 수 없는 경우: 매칭완료 및 활동 중인 방문이 있는 경우 (#scdl_disable_ipsb) 팝업 등장

                추가 AMR 200908 스케줄 비활성 input.scd_disable on일 경우
                gnb 메뉴 비활성 : 방문시간표, 방문관리, 정산내역
              -->
              <div class="btn_scdl_disable btn_option">
                <input type="checkbox" id="scd_disable">
                <label for="scd_disable">스케줄 비활성화</label>
              </div>
              <div class="btn_option">
                <input type="checkbox" id="scd_reject">
                <label for="scd_reject">신규 신청거부</label>
              </div>
            </div>

            <!-- .lst_group -->
            <div class="lst_group">
              <!-- .week_lst -->
              <!-- [D] .week_lst li에서 click evnet 시 addClass('on')으로 활성화됨 
                            (선택 요일에 시간 선택 후 저장하지 않고 다른 요일로 넘어갈 경우 
                            스케줄 초기화 팝업(#scdl_reset)을 띄워 '취소' 시 기존 선택 요일화면 유지,
                            '확인' 시 저장하지 않은 시간은 초기화되며 다른 요일로 넘어감) -->
              <ul class="week_lst">
                <li><a href="#none">월</a></li>
                <li><a href="#none">화</a></li>
                <li class="on"><a href="#none">수</a></li>
                <li><a href="#none">목</a></li>
                <li><a href="#none">금</a></li>
                <li><a href="#none">토</a></li>
                <li><a href="#none">일</a></li>
              </ul>
              <!-- //.week_lst -->

              <!-- .time_lst -->
              <!-- [D] click evnet & touchmove event 시 선택 또는 터치상태로 이동된 만큼의 
                            .time_lst li에 addClass('on')하여 활성화시켜야함 -->
              <ol class="time_lst">
                <li class="on">
                  <a href="#none">
                    <span>
                      08:00
                      <small>&tilde;08:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      08:30
                      <small>&tilde;09:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      09:00
                      <small>&tilde;09:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      09:30
                      <small>&tilde;10:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      10:00
                      <small>&tilde;10:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      10:30
                      <small>&tilde;11:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      11:00
                      <small>&tilde;11:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      11:30
                      <small>&tilde;12:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      12:00
                      <small>&tilde;12:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      12:30
                      <small>&tilde;13:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      13:00
                      <small>&tilde;13:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      13:30
                      <small>&tilde;14:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      14:00
                      <small>&tilde;14:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      14:30
                      <small>&tilde;15:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      15:00
                      <small>&tilde;15:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      15:30
                      <small>&tilde;16:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      16:00
                      <small>&tilde;16:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      16:30
                      <small>&tilde;17:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      17:00
                      <small>&tilde;17:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      17:30
                      <small>&tilde;18:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      18:00
                      <small>&tilde;18:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      18:30
                      <small>&tilde;19:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      19:00
                      <small>&tilde;19:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      19:30
                      <small>&tilde;20:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      20:00
                      <small>&tilde;20:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      20:30
                      <small>&tilde;21:00</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      21:00
                      <small>&tilde;21:30</small>
                    </span>
                  </a>
                </li>
                <li>
                  <a href="#none">
                    <span>
                      21:30
                      <small>&tilde;22:00</small>
                    </span>
                  </a>
                </li>
              </ol>
              <!-- //.time_lst -->
            </div>
            <!-- //.lst_group -->

            <div class="notice">
              <div class="notice_bg">
                <span class="notice_text">선택한 시간을 다시 터치하면 선택이 해제됩니다.</span>
              </div>
            </div>

            <div class="btm_box">
              <button type="button" class="btn_save">
                <span class="week">수</span>요일 스케줄을 저장합니다.
              </button>
            </div>
          </div>
          <!-- //.cont_slt_time -->

          <!-- .cont_slt_date -->
          <div class="cont_slt_date">
            <div class="calendar_box">
              <!-- [D] .fc-day에서 click evnet 시 addClass('on')으로 활성화됨 
                            (해당 월에 날짜 선택 후 저장하지 않고 다른 월로 넘어갈 경우 
                            스케줄 초기화 팝업(#scdl_reset)을 띄워 '취소' 시 기존 선택 월과 선택 날짜 유지,
                            '확인' 시 저장하지 않은 날짜는 초기화되며 다른 월로 넘어감) -->

              <!-- [D] FullCalendar 적용되는 div -->
              <div id="calendar"></div>
            </div>

            <div class="notice">
              <div class="notice_bg">
                <span class="notice_text">선택한 일정을 다시 터치하면 선택이 해제됩니다.</span>
              </div>
            </div>

            <div class="btm_box">
              <button type="button" class="btn_save">
                <span class="month">8</span>월 방문불가 일정을 저장합니다.
              </button>
            </div>
          </div>
          <!-- //.cont_slt_date -->
        </div>
        <!-- //.set_board -->
      </div>
      <!-- //.set_area -->
    </div>
    <!-- //#m_container -->
  </div>
  <!-- //#wrap -->

  <!-- popup -->
  <!-- 선택 스케줄 초기화 -->
  <!-- [D] .alert_pop 에 'on' class가 추가되면 팝업 등장 -->
  <div id="scdl_reset" class="alert_box alert_pop">
    <div class="lyr_cont">
      <div class="title_box">
        <span class="title">선택한 스케줄이 초기화됩니다.</span>
      </div>

      <div class="cont_box">
        <span class="cont_desc">선택된 스케줄을 저장 하시려면 <strong>‘취소’</strong>를 눌러 스케줄을 저장한 후 이동해주세요.</span>
        <span class="cont_desc"><strong>‘확인’</strong>을 누르면 스케줄이 초기화되며 선택한 스케줄로 이동합니다.</span>
      </div>
    </div>

    <div class="lyr_btm">
      <button type="button" class="btn_cancel scdl_lyr_close">취소</button>
      <button type="button" class="btn_reset">확인</button>
    </div>
  </div>
  <!-- //선택 스케줄 초기화 -->

  <!-- 스케줄 설정 비활성화 -->
  <!-- [D] .alert_pop 에 'on' class가 추가되면 팝업 등장 -->
  <div id="scdl_disable" class="alert_box alert_pop">
    <div class="lyr_cont">
      <div class="title_box">
        <span class="title">스케줄 설정이 비활성화 됩니다.</span>
      </div>

      <div class="cont_box">
        <span class="cont_desc">스케줄 비활성화 모드 작동시,<br>재활성화를 할 때까지 방문활동이 제한됩니다.</span>
      </div>
    </div>

    <div class="lyr_btm">
      <button type="button" class="btn_cancel scdl_lyr_close">확인</button>
    </div>
  </div>
  <!-- //스케줄 설정 비활성화 -->

  <!-- 스케줄 설정 활성화 -->
  <!-- [D] .alert_pop 에 'on' class가 추가되면 팝업 등장 -->
  <div id="scdl_activate" class="alert_box alert_pop">
    <div class="lyr_cont">
      <div class="title_box">
        <span class="title">스케줄 설정이 활성화 됩니다.</span>
      </div>

      <div class="cont_box">
        <span class="cont_desc">스케줄 설정이 활성 모드로 전환되어,<br>방문활동이 가능해 졌습니다.</span>
        <em class="cont_ntc">매칭을 위해 스케줄을 다시 설정해주세요!</em>
      </div>
    </div>

    <div class="lyr_btm">
      <button type="button" class="btn_cancel scdl_lyr_close">확인</button>
    </div>
  </div>
  <!-- //스케줄 설정 활성화 -->

  <!-- 스케줄 설정 비활성화 불가 -->
  <!-- [D] .alert_pop 에 'on' class가 추가되면 팝업 등장 -->
  <!-- [D] 시간 설정 화면에서 선택한 일정에 이미 매칭 또는 예정인 방문이 있는 경우에 등장 -->
  <div id="scdl_disable_ipsb" class="alert_box alert_pop">
    <div class="lyr_cont">
      <div class="title_box">
        <span class="title">스케줄을 비활성화 할 수 없습니다.</span>
      </div>

      <div class="cont_box">
        <span class="cont_desc">매칭완료 및 활동(예정)중인 방문이 있는 경우,<br>스케줄 비활성화 모드 전환이 제한됩니다.</span>
        <span class="cont_desc">사전안내 없이 방문을 중도 취소하거나,<br>방문하지 않을 경우 위약금이 발생됩니다.</span>
        <em class="cont_ntc">신규 방문신청을 받고 싶지 않은 경우,<br>‘신규 신청거부’를 설정해주세요.</em>
      </div>
    </div>

    <div class="lyr_btm">
      <button type="button" class="btn_cancel scdl_lyr_close">확인</button>
    </div>
  </div>
  <!-- //스케줄 설정 비활성화 불가 -->

  <!-- 방문 불가능 일정 설정 불가 -->
  <!-- [D] .alert_pop 에 'on' class가 추가되면 팝업 등장 -->
  <!-- [D] 날짜 선택 화면에서 선택한 일정에 이미 매칭 또는 예정인 방문이 있는 경우에 등장 -->
  <div id="scdl_visit_ipsb" class="alert_box alert_pop">
    <div class="lyr_cont">
      <div class="title_box">
        <span class="title">방문 불가능 일정을 설정할 수 없습니다.</span>
      </div>

      <div class="cont_box">
        <span class="cont_desc">매칭완료 및 활동(예정)중인 방문이 있는 경우,<br>불가능한 일정 설정이 제한됩니다.</span>
      </div>
    </div>

    <div class="lyr_btm">
      <button type="button" class="btn_cancel scdl_lyr_close">확인</button>
    </div>
  </div>
  <!-- //방문 불가능 일정 설정 불가 -->

  <!-- script -->
  <script type="text/javascript">
    $(document).ready(function () {
      // 공통 AMR gnb 열기/닫기
      $('.gnb_open').on('click', function (e) {
        e.stopPropagation();
        handleGndClose();

        $('body').addClass('gnb_backdrop');
        $('#gnb').addClass('show');
        setTimeout(function () {
          $('#gnb').addClass('on');
        }, 100);

        // gnd 닫기
        function handleGndClose() {
          // gnb에서 클릭 시 버블링 막기
          $('#gnb').on('click', function (e) {
            e.stopPropagation();
          })

          // gnb를 제외한 body를 클릭
          $('body').on('click', function (e) {
            if ($('body').hasClass('gnb_backdrop')) {
              $('#gnb').removeClass('on');
              setTimeout(function () {
                $('#gnb').removeClass('show');
                $('body').removeClass('gnb_backdrop');
              }, 200);
            }
          })
        }
      });
    });
  </script>

  <!-- script UX/UI Team NBR -->
  <script type="text/javascript">
    $(document).ready(function () {
      // 방문 불가 설정 달력 Fullcalendar

      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: new Date(),
        // selectable: false,
        contentHeight: 'auto',
        showNonCurrentDates: true,
        views: {
          dayGridMonth: {
            titleFormat: {
              year: 'numeric',
              month: 'numeric'
            },
          },
        },
        validRange: {
          start: moment().add("4", "d").format("YYYY-MM-DD"),
          end: moment().add("93", "d").format("YYYY-MM-DD"),
        }
      });
      calendar.render();

      // 선택 불가 날짜에 ㆍ 넣어줌
      $('.fc-day-disabled > div').append('<div class="fc-daygrid-day-top"><a class="slt_disable">&bull;</a></div>')

      // 요일 한글로 출력 (Fullcalendar 옵션으로 lang'ko'를 주니 일자도 모두 바뀌어 html 직접 바꿔줌)
      function weekListKo() {
        // 일요일
        var weekSun = $('.fc-day-sun .fc-col-header-cell-cushion');
        weekSunKo = weekSun.text().replace('Sun', '일');
        weekSun.html(weekSunKo);

        // 월요일
        var weekMon = $('.fc-day-mon .fc-col-header-cell-cushion');
        weekMonKo = weekMon.text().replace('Mon', '월');
        weekMon.html(weekMonKo);

        // 화요일
        var weekTue = $('.fc-day-tue .fc-col-header-cell-cushion');
        weekTueKo = weekTue.text().replace('Tue', '화');
        weekTue.html(weekTueKo);

        // 수요일
        var weekWed = $('.fc-day-wed .fc-col-header-cell-cushion');
        weekWedKo = weekWed.text().replace('Wed', '수');
        weekWed.html(weekWedKo);

        // 목요일
        var weekThu = $('.fc-day-thu .fc-col-header-cell-cushion');
        weekThuKo = weekThu.text().replace('Thu', '목');
        weekThu.html(weekThuKo);

        // 금요일
        var weekFri = $('.fc-day-fri .fc-col-header-cell-cushion');
        weekFriKo = weekFri.text().replace('Fri', '금');
        weekFri.html(weekFriKo);

        // 토요일
        var weekSat = $('.fc-day-sat .fc-col-header-cell-cushion');
        weekSatKo = weekSat.text().replace('Sat', '토');
        weekSat.html(weekSatKo);
      } weekListKo();

      // 시간, 날짜 선택 박스 width와 동일하게 height 주기
      // 시간
      var timeBoxwidth = $('.time_lst li').width();
      $('.time_lst li').height(timeBoxwidth);
      // 날짜
      var dateBoxwidth = $('.fc-daygrid th').width();
      $('.fc-day').height(dateBoxwidth);

      // 요일 선택 
      $('.week_lst li a').on('click', function () {
        // 선택 날짜 활성화
        $('.week_lst li').removeClass('on');
        $(this).parent('li').addClass('on');

        // 하단 버튼에 선택 요일명 넣어주기
        var weekName = $(this).text();
        var weekSaveBtn = $('.btn_save .week');
        weekSaveBtn.html(weekName);
      });

      // 시간 선택 시 활성화
      $('.time_lst li').on('click', function () {
        $(this).toggleClass('on');
      });

      // 스케줄 저장 버튼 터치 이벤트
      $('.btm_box button').on('touchstart touchend', function () {
        $(this).toggleClass('on');
      });

      // 달력 이동 버튼 클릭 시 해당 월 숫자 하단 버튼에 넣어주기
      $('.fc-button').on('click', function () {
        var monthNum = $('.fc-toolbar-month').text();
        var monthSaveBtn = $('.btn_save .month');
        monthSaveBtn.html(monthNum);
      });

      // 달력 선택 일자 활성화
      $('.fc-scrollgrid-sync-table tbody').on('click', '.fc-day', function () {
        $(this).toggleClass('on')
      })

      // 달력 넘기기 버튼 클릭 시
      $('.fc-button').on('click', function () {
        // 선택 불가 날짜에 ㆍ 넣어줌
        $('.fc-day-disabled > div').append('<div class="fc-daygrid-day-top"><a class="slt_disable">&bull;</a></div>')

        // 날짜 선택 박스 width와 동일한 height 주기
        var dateBoxwidth = $('.fc-daygrid th').width();
        $('.fc-day').height(dateBoxwidth);
      });

      // 공통 tap list 열기/닫기
      function handleTapList() {
        var setBtn = $('.set_btn_box li');
        var setCont = $('.set_board > div');

        setCont.hide();
        setCont.eq(0).show();

        setBtn.on('click', function () {
          var target = $(this);
          var index = target.index();
          setBtn.removeClass('on');
          target.addClass('on');
          setCont.css('display', 'none');
          setCont.eq(index).css('display', 'block');
        });
      } handleTapList();

      // 스케줄 활성/비활성 버튼 팝업
      var scdlCheck = false;

      $('.btn_scdl_disable label').click(function () {
        $('body').addClass('lyr_backdrop');

        if (!scdlCheck) {
          $('#scdl_disable').css('display', 'block');
          setTimeout(function () {
            $('#scdl_disable').addClass('on') //레이어 오픈 효과 적용
          }, 100);
          scdlCheck = true;
        } else {
          $('#scdl_activate').css('display', 'block');
          setTimeout(function () {
            $('#scdl_activate').addClass('on') //레이어 오픈 효과 적용
          }, 100);
          scdlCheck = false;
        }
      });

      // 레이어 닫기버튼 클릭
      $('.scdl_lyr_close').on('click', function () {
        $('.alert_pop').removeClass('on');
        setTimeout(function () {
          $('.alert_pop').css('display', 'none');
          $('body').removeClass('lyr_backdrop');
        }, 100);
      });
    });
  </script>
</body>
</html>
